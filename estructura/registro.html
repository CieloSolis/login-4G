<html>
<head>
    <link rel="stylesheet" href="../estilos/registro.css">
    <title>REGISTRO</title>
</head>
<body>
    <div class="card">
        <div class="card-body">
            <form action="../logica/registro.php" method="post">
                <h1>
                    REGISTRO
                </h1>
                <div class="img-perfil">
                    <img src="../imagenes/usuario.png" alt="Usuario">
                    <label for="input-img" class="subir-imagen">
                       Elegir
                    </label>
                    <input type="file" accept="image/*" id="input-img">
                </div>
                <div class="registrar">
                    <div class="fila">
                        <div class="registro">
                            <label>Nombre:</label>
                            <input type="text" name="nombre" pattern="[A-Za-z]+" />
                        </div>
                        <div class="registro">
                            <label>Apellidos:</label>
                            <input type="text" name="apellido" pattern="[A-Za-z]+" />
                        </div>
                    </div>
                    <div class="fila">
                        <div class="registro">
                            <label>Edad:</label>
                            <input type="number" min="0" max="110" name="edad" />
                        </div>
                        <div class="registro">
                            <label>Dirección:</label>
                            <input type="text" name="direccion" />
                        </div>
                    </div>
                    <div class="fila">
                        <div class="registro">
                            <label>Usuario:</label>
                            <input type="email" name="usuario" onblur="validateEmail()"/>
                        </div>
                        <div class="registro">
                            <label>Contraseña:</label>
                            <input type="password" name="contrasena" />
                        </div>
                    </div>
                </div>
                <p>
                    <span id="emailError"></span>
                </p>
                <div class="btn-enviar">
                    <button type="submit">ENVIAR DATOS</button>
                </div>
            </form>
            <div class="login" >
                <label>
                    ¿Ya tienes cuenta?
                </label>
                <br>
                <button onclick="location.href='login.html'">INICIAR SESION</button>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    const inputImg = document.getElementById('input-img');
    const imgPerfil = document.querySelector('.img-perfil img');
    inputImg.addEventListener('change', () => {
        const file = inputImg.files[0];
        const fileReader = new FileReader();
        fileReader.onload = () => {
            imgPerfil.src = fileReader.result;
        }
        fileReader.readAsDataURL(file);
    });

    function validateEmail() {
        var email = document.getElementsByName("usuario")[0].value;
        var emailError = document.getElementById("emailError");

        if (email === "") {
            emailError.textContent = "Please enter an email address.";
        } else if (!validateEmailStructure(email)) {
            emailError.textContent = "Please enter a valid email address.";
        } else {
            emailError.textContent = "";
        }

        function validateEmailStructure(email) {
            // Regular expression to validate email structure
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

    }

    function validatePassword() {
        var password = document.getElementsByName("password")[0].value;
        var passwordError = document.getElementById("passwordError");

        if (password === "") {
            passwordError.textContent = "Please enter a password.";
        } else if (!validatePasswordFormat(password)) {
            passwordError.textContent = "Please enter a valid password format.";
        } else {
            passwordError.textContent = "";
        }

        function validatePasswordFormat(password) {
            // Regular expression to validate password format
            var passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/;
            return passwordRegex.test(password);
        }
    }	

    function validateName() {
        var name = document.getElementsByName("name")[0].value;
        var nameError = document.getElementById("nameError");

        if (name === "") {
            nameError.textContent = "Please enter a name.";
        } else {
            nameError.textContent = "";
        }
    }
</script>